/*!
 * Name: panopticon
 * Id: panopticon
 * Version: 1.0.1
 * Description:
 * Author:  ()
 * Repository:
 */
define(["react","code-plug","../../src/components","rsuite","../../../src/components"],(e,t,r,n,a)=>(()=>{var o={21:(e,t,r)=>{var n=r(645);(e.exports=n(!1)).push([e.id,".secret-viewer .display-secret{padding:4px 10px;font-family:monospace;background-color:#eeeeee;border:1px solid #bbbbbb}.secret-viewer .secret-reveal-at{font-size:40px;font-weight:bolder}\n",""])},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var a=(s=n,l=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),"/*# ".concat(i," */")),o=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot).concat(e," */")}));return[r].concat(o).concat([a]).join("\n")}var s,l,i;return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(r,"}"):r})).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},a=0;a<this.length;a++){var o=this[a][0];null!=o&&(n[o]=!0)}for(var s=0;s<e.length;s++){var l=e[s];null!=l[0]&&n[l[0]]||(r&&!l[2]?l[2]=r:r&&(l[2]="(".concat(l[2],") and (").concat(r,")")),t.push(l))}},t}},982:(e,t,r)=>{var n=r(21);"string"==typeof n&&(n=[[e.id,n,""]]);var a={insert:"head",singleton:!1};r(379)(n,a);n.locals&&(e.exports=n.locals)},379:(e,t,r)=>{"use strict";var n,a={},o=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},s=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}();function l(e,t){for(var r=[],n={},a=0;a<e.length;a++){var o=e[a],s=t.base?o[0]+t.base:o[0],l={css:o[1],media:o[2],sourceMap:o[3]};n[s]?n[s].parts.push(l):r.push(n[s]={id:s,parts:[l]})}return r}function i(e,t){for(var r=0;r<e.length;r++){var n=e[r],o=a[n.id],s=0;if(o){for(o.refs++;s<o.parts.length;s++)o.parts[s](n.parts[s]);for(;s<n.parts.length;s++)o.parts.push(g(n.parts[s],t))}else{for(var l=[];s<n.parts.length;s++)l.push(g(n.parts[s],t));a[n.id]={id:n.id,refs:1,parts:l}}}}function c(e){var t=document.createElement("style");if(void 0===e.attributes.nonce){var n=r.nc;n&&(e.attributes.nonce=n)}if(Object.keys(e.attributes).forEach((function(r){t.setAttribute(r,e.attributes[r])})),"function"==typeof e.insert)e.insert(t);else{var a=s(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function p(e,t,r,n){var a=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=d(t,a);else{var o=document.createTextNode(a),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function m(e,t,r){var n=r.css,a=r.media,o=r.sourceMap;if(a&&e.setAttribute("media",a),o&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var f=null,v=0;function g(e,t){var r,n,a;if(t.singleton){var o=v++;r=f||(f=c(t)),n=p.bind(null,r,o,!1),a=p.bind(null,r,o,!0)}else r=c(t),n=m.bind(null,r,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=o());var r=l(e,t);return i(r,t),function(e){for(var n=[],o=0;o<r.length;o++){var s=r[o],c=a[s.id];c&&(c.refs--,n.push(c))}e&&i(l(e,t),t);for(var u=0;u<n.length;u++){var d=n[u];if(0===d.refs){for(var p=0;p<d.parts.length;p++)d.parts[p]();delete a[d.id]}}}}},570:e=>{"use strict";e.exports=a},727:e=>{"use strict";e.exports=r},737:e=>{"use strict";e.exports=t},650:t=>{"use strict";t.exports=e},131:e=>{"use strict";e.exports=n}},s={};function l(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={id:e,exports:{}};return o[e](r,r.exports,l),r.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{"use strict";l.r(i);var e=l(650),t=l.n(e),r=l(737),n=l(727),a=l(131),o=l(570);let s;null!=window.AppContext?s=window.AppContext:(s=t().createContext({}),window.AppContext=s);const c=s,u=()=>{const{state:t}=(0,e.useContext)(c);return t.settings},d=e=>"location"===e?"#5E8263":e?"#D36135":e?"#595D88":"#000000";l(982);const p=()=>t().createElement(a.Icon,{className:"map-marker",icon:"map-marker",size:"2x",style:{color:"red"}}),m=({record:e})=>{const{payload:r}=e,{googleMapsKey:n}=u(),s=new Date(r.secret_duration),l=new Date,i=s.getTime()-l.getTime();return t().createElement("div",{className:"secret-viewer"},t().createElement(a.FlexboxGrid,{justify:"space-between",style:{marginTop:"30px"}},t().createElement(a.FlexboxGrid.Item,{colspan:7},t().createElement("div",null,t().createElement("b",null,"Secret is")," ",t().createElement(o.SmallTag,{color:d(r.secret_type)},r.secret_type)),("time"===r.secret_type||"location+time"===r.secret_type)&&t().createElement("div",null,t().createElement("b",null,"Revealed when"),t().createElement("br",null),t().createElement("em",null,s.toLocaleDateString(),", ",s.toLocaleTimeString()),i>0&&t().createElement("div",{className:"secret-reveal-at"},Math.round(i/1e3/60)," minutes"),i<0&&t().createElement("div",null,"Secret date is due"))),t().createElement(a.FlexboxGrid.Item,{colspan:7},null!=r.secret_url&&t().createElement("div",null,t().createElement("b",null,"Secret image"),t().createElement("img",{src:r.secret_url,width:"100%"})),null!=r.secret&&t().createElement("div",null,t().createElement("b",null,"Secret text"),t().createElement("div",{className:"display-secret"},r.secret))),t().createElement(a.FlexboxGrid.Item,{colspan:7},null!=e.latitude&&t().createElement("div",{className:"ui-devices-map",style:{height:"300px"}},t().createElement(o.Maps,{defaultCenter:{lat:e.latitude,lng:e.longitude},defaultZoom:11},t().createElement(p,null))),null==e.latitude&&t().createElement("div",null,t().createElement("em",null,"No location for this secret")))))};(0,r.plug)("sidebar",null,{id:"wiggle",label:"Wiggle",icon:"logo-survey",permission:"wiggle.view",options:[{id:"wiggle-secrets",label:"Secrets",url:"/secrets"}]}),(0,r.plug)("pages",n.UserRecords,{url:"/secrets",title:"Secrets",id:"secrets",type:"secret",permission:"wiggle.view",breadcrumbs:["Secrets"],labels:{title:"Name",record:"secret"},columns:[{id:"secret-type",label:"Type",width:120,cell:({payload:e})=>t().createElement(n.SmallTag,{color:d(e.secret_type)},e.secret_type)}]}),(0,r.plug)("permissions",null,{permission:"wiggle.view",name:"View Wiggle secret",description:"View secrets stored in Wiggle Bot",group:"Wiggle"}),(0,r.plug)("user-record-types",null,{type:"secret",name:"Secret",list:"Secrets",description:"List of Wiggle secrets",form:m,status:[{value:"new",label:"New"},{value:"expired",label:"Expired"}]})})(),i})());